{"name":"Spring and RabbitMQ Integration","tagline":"Spring and RabbitMq integration","body":"### Spring and RabbitMQ Integration.\r\nThis example walks you through the integration of Spring with RabbitMQ AMQP server that helps in asynchronous communication.\r\n\r\nAMQP (Advanced Message Queuing Protocol) is an open standard application layer protocol for message-oriented middleware. The defining features of AMQP are message orientation, queuing, routing (including point-to-point and publish-and-subscribe), reliability and security. RabbitMQ is an open source message broker that supports the AMQP standard. \r\n\r\n### Tech Stack\r\n* RabbitMQ `https://www.rabbitmq.com/install-standalone-mac.html`\r\n* Java \r\n* Maven\r\n* Spring Boot\r\n\r\n### Dependencies\r\n```\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.amqp</groupId>\r\n\t\t\t<artifactId>spring-amqp</artifactId>\r\n\t\t\t<version>1.5.3.RELEASE</version>\r\n\t\t</dependency>\r\n\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.integration</groupId>\r\n\t\t\t<artifactId>spring-integration-amqp</artifactId>\r\n\t\t\t<version>2.1.3.RELEASE</version>\r\n\t\t</dependency>\r\n```\r\n\r\n### Steps to Run\r\n```\r\nmvn spring-boot:run\r\n```\r\nThis command will start the application on port 8080. There is a rest endpoint _/message_ which takes the message as a plain text and publishes to the message and there is a listener which listens the queue and logs the published message in the console.\r\n\r\n### Project Structure\r\n```\r\njava\r\n    |_\tcom\r\n\t|_ spring\r\n\t\t|_ rabbitmq\r\n\t\t\t|_ controller\r\n\t\t\t|\t|_ MessageController\r\n\t\t\t|_ service\r\n\t\t\t\t|_ MessageListenerService\r\n\t\t\t\t|_ MessageSenderService\r\n\t\t\tDemoApplication\r\nresources\r\n\t|_ context.xml\r\n\t|_ rabbitmq_context.xml\r\n```\t\r\n`MessageController` is the rest end point which consumes plain text and helps in publishing the messaging on the queue. The services helps in subscribing and publishing of the messages. `rabbitmq_context.xml` has the rabbitmq configuration. \r\n\r\n### Configuring RabbitMQ\r\n```\r\n    <rabbit:topic-exchange id=\"my.first.exchange\" name=\"my.first.exchange\">\r\n        <rabbit:bindings>\r\n            <rabbit:binding queue=\"my.first.queue\" pattern=\"my.#.*\"/>\r\n        </rabbit:bindings>\r\n    </rabbit:topic-exchange>\r\n```\r\nThis creates the exchange called `my.first.exchange` and binds the queue called `my.first.queue`. The pattern is used for defining the routing key. This means, the queue will accept all the message with routing key starts with \"my\". \r\n\r\n```\r\n    <bean id=\"messageListener\" class=\"com.spring.rabbitmq.service.MessageListenerService\" />\r\n\r\n    <rabbit:listener-container connection-factory=\"connectionFactory\">\r\n        <rabbit:listener ref=\"messageListener\" queues=\"my.first.queue\" />\r\n    </rabbit:listener-container>\r\n```\r\nThis makes the MessageListenerService to listen on the queue `my.first.queue`. \r\n\r\n###rabbitmq-context.xml\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n       xmlns:rabbit=\"http://www.springframework.org/schema/rabbit\"\r\n       xsi:schemaLocation=\"http://www.springframework.org/schema/rabbit\r\n           http://www.springframework.org/schema/rabbit/spring-rabbit.xsd\r\n           http://www.springframework.org/schema/beans\r\n           http://www.springframework.org/schema/beans/spring-beans.xsd\">\r\n\r\n    <rabbit:connection-factory id=\"connectionFactory\" host=\"localhost\" username=\"guest\" password=\"guest\" />\r\n\r\n    <rabbit:admin connection-factory=\"connectionFactory\" />\r\n\r\n    <rabbit:template id=\"messageSender\" connection-factory=\"connectionFactory\"  exchange=\"my.first.exchange\"/>\r\n\r\n    <rabbit:queue id=\"my.first.queue\" name=\"my.first.queue\" />\r\n\r\n    <rabbit:topic-exchange id=\"my.first.exchange\" name=\"my.first.exchange\">\r\n        <rabbit:bindings>\r\n            <rabbit:binding queue=\"my.first.queue\" pattern=\"my.#.*\"/>\r\n        </rabbit:bindings>\r\n    </rabbit:topic-exchange>\r\n\r\n    <bean id=\"messageListener\" class=\"com.spring.rabbitmq.service.MessageListenerService\" />\r\n\r\n    <rabbit:listener-container connection-factory=\"connectionFactory\">\r\n        <rabbit:listener ref=\"messageListener\" queues=\"my.first.queue\" />\r\n    </rabbit:listener-container>\r\n\r\n</beans>\r\n```\r\n\r\n### MessageListener\r\n`MessageListenerService` class implements the interface provided by spring called `org.springframework.amqp.core.MessageListener` and the method `onMessage` has to be defined (Here, the published message properties and body has been logged)\r\n\r\n### MessageSender\r\n`MessageSenderService` serves the purpose of publishing the message. It uses `org.springframework.amqp.core.AmqpTemplate` for converting and sending the message.\r\n\r\n###References\r\n`https://keyholesoftware.com/2013/04/01/rabbitmq-with-spring-tutorial/`\r\n\r\n\r\n\r\n\r\n\r\n\r\n","google":"UA-73771188-1","note":"Don't delete this file! It's used internally to help with page regeneration."}